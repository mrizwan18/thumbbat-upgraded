{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/kingoros/Personal%20Projects/thumbbat-upgraded/src/app/confirm/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst Confirm = () => {\n  const [loading, setLoading] = useState(true);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [countdown, setCountdown] = useState(10); // 10 seconds countdown\n  const router = useRouter();\n  const searchParams = useSearchParams();\n\n  useEffect(() => {\n    // Get token from URL params\n    const token = searchParams.get(\"token\");\n\n    if (!token) {\n      setErrorMessage(\"Invalid or missing token.\");\n      setLoading(false);\n      return;\n    }\n\n    let timer: NodeJS.Timeout;\n\n    // Call backend to validate the token\n    const validateToken = async () => {\n      try {\n        const response = await axios.get(`/api/auth/confirm?token=${token}`);\n        if (response.status === 200) {\n          // Successfully confirmed\n          toast.success(\"Account confirmed successfully!\");\n          setLoading(false);\n\n          // Create separate timer for countdown\n          timer = setInterval(() => {\n            setCountdown((prev) => prev - 1);\n          }, 1000);\n        }\n      } catch (error) {\n        console.error(\"Token validation error:\", error);\n        // If token validation fails\n        setErrorMessage(\"Invalid or expired token. Please try again.\");\n        setLoading(false);\n      }\n    };\n\n    validateToken();\n\n    // Cleanup timer\n    return () => {\n      if (timer) clearInterval(timer);\n    };\n  }, [searchParams]);\n\n  // Separate useEffect for navigation\n  useEffect(() => {\n    if (countdown <= 0) {\n      router.push(\"/login\");\n    }\n  }, [countdown, router]);\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen bg-gray-900 text-white\">\n        <div className=\"w-12 h-12 border-4 border-t-4 border-white border-solid rounded-full animate-spin\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex justify-center items-center min-h-screen bg-gray-900 text-white\">\n      <div className=\"bg-gray-800 p-8 rounded-xl shadow-xl max-w-md w-full text-center\">\n        {errorMessage ? (\n          <div>\n            <h2 className=\"text-2xl font-semibold mb-4\">❌ {errorMessage}</h2>\n          </div>\n        ) : (\n          <div>\n            <h2 className=\"text-2xl font-semibold mb-4\">\n              ✅ Account confirmed successfully!\n            </h2>\n            <p className=\"mb-4\">\n              You will be redirected to the login page in {countdown} seconds.\n            </p>\n            <button\n              onClick={() => router.push(\"/login\")}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg\"\n            >\n              Go to Login Now\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Confirm;\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AAFA;;;AAHA;;;;;;AAQA,MAAM,UAAU;;IACd,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,KAAK,uBAAuB;IACvE,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,eAAe,CAAA,GAAA,qIAAA,CAAA,kBAAe,AAAD;IAEnC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,4BAA4B;YAC5B,MAAM,QAAQ,aAAa,GAAG,CAAC;YAE/B,IAAI,CAAC,OAAO;gBACV,gBAAgB;gBAChB,WAAW;gBACX;YACF;YAEA,IAAI;YAEJ,qCAAqC;YACrC,MAAM;mDAAgB;oBACpB,IAAI;wBACF,MAAM,WAAW,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,CAAC,wBAAwB,EAAE,OAAO;wBACnE,IAAI,SAAS,MAAM,KAAK,KAAK;4BAC3B,yBAAyB;4BACzB,sJAAA,CAAA,QAAK,CAAC,OAAO,CAAC;4BACd,WAAW;4BAEX,sCAAsC;4BACtC,QAAQ;mEAAY;oCAClB;2EAAa,CAAC,OAAS,OAAO;;gCAChC;kEAAG;wBACL;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,2BAA2B;wBACzC,4BAA4B;wBAC5B,gBAAgB;wBAChB,WAAW;oBACb;gBACF;;YAEA;YAEA,gBAAgB;YAChB;qCAAO;oBACL,IAAI,OAAO,cAAc;gBAC3B;;QACF;4BAAG;QAAC;KAAa;IAEjB,oCAAoC;IACpC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,IAAI,aAAa,GAAG;gBAClB,OAAO,IAAI,CAAC;YACd;QACF;4BAAG;QAAC;QAAW;KAAO;IAEtB,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACZ,6BACC,6LAAC;0BACC,cAAA,6LAAC;oBAAG,WAAU;;wBAA8B;wBAAG;;;;;;;;;;;qCAGjD,6LAAC;;kCACC,6LAAC;wBAAG,WAAU;kCAA8B;;;;;;kCAG5C,6LAAC;wBAAE,WAAU;;4BAAO;4BAC2B;4BAAU;;;;;;;kCAEzD,6LAAC;wBACC,SAAS,IAAM,OAAO,IAAI,CAAC;wBAC3B,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAQb;GA1FM;;QAIW,qIAAA,CAAA,YAAS;QACH,qIAAA,CAAA,kBAAe;;;KALhC;uCA4FS"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}